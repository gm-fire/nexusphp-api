{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@gm-fire/nexusphp-api/webpack/bootstrap","webpack://@gm-fire/nexusphp-api/webpack/runtime/compat get default export","webpack://@gm-fire/nexusphp-api/webpack/runtime/define property getters","webpack://@gm-fire/nexusphp-api/webpack/runtime/hasOwnProperty shorthand","webpack://@gm-fire/nexusphp-api/webpack/runtime/make namespace object","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/extend']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['forum/app']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['forum/components/PostUser']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/components/Button']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@gm-fire/nexusphp-api/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@gm-fire/nexusphp-api/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@gm-fire/nexusphp-api/./src/forum/components/SeedBonusModal.js","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/components/Link']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/helpers/punctuateSeries']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/Component']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@gm-fire/nexusphp-api/./src/forum/components/MedalsBar.js","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/utils/string']\"","webpack://@gm-fire/nexusphp-api/./src/forum/components/PostBonusNotification.js","webpack://@gm-fire/nexusphp-api/./src/forum/components/PostReplyNotification.js","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/extenders']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['common/models/Post']\"","webpack://@gm-fire/nexusphp-api/external root \"flarum.core.compat['forum/components/PostsUserPage']\"","webpack://@gm-fire/nexusphp-api/./src/forum/components/BonusUserPage.tsx","webpack://@gm-fire/nexusphp-api/./src/forum/extend.ts","webpack://@gm-fire/nexusphp-api/./src/forum/compat.ts","webpack://@gm-fire/nexusphp-api/external assign \"flarum.core\"","webpack://@gm-fire/nexusphp-api/./src/forum/index.js","webpack://@gm-fire/nexusphp-api/./src/forum/addSeedBonusAction.js","webpack://@gm-fire/nexusphp-api/./src/forum/addBonusList.js","webpack://@gm-fire/nexusphp-api/./src/forum/addBonusTabToUserProfile.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostUser'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport extractText from 'flarum/common/utils/extractText';\n\nexport default class SeedBonusModal extends Modal {\n  oninit(vnode) {\n\n    super.oninit(vnode);\n    this.seedbonus = Stream(100);\n    this.success = false;\n    const user = this.attrs.user;\n    const post = this.attrs.post;\n    this.nickname = Stream(user.data.attributes.displayName);\n    this.username = Stream(user.data.attributes.username);\n    this.postId = Stream(post.data.id);\n  }\n\n  className() {\n    return 'SeedBonusModal Modal--medium';\n  }\n\n  title() {\n    return app.translator.trans('gm-fire-nexusphp-api.forum.seedbonus.title');\n  }\n\n  content() {\n    if (this.success) {\n      return (\n        <div className=\"Modal-body\">\n          <div className=\"Form Form--centered\">\n            <p className=\"helpText\">{app.translator.trans('gm-fire-nexusphp-api.forum.seedbonus.confirmation_message')}</p>\n            <div className=\"Form-group\">\n              <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\n                {app.translator.trans('gm-fire-nexusphp-api.forum.seedbonus.dismiss_button')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <input type=\"number\" min=\"100\" autocomplete=\"off\" name=\"senndbonus\" className=\"FormControl\" max=\"10000000\" onblur={this.seedbonus(this.seedbonus().toString().replace(/[^0-9-]/g, \"\"))} bidi={this.seedbonus} placeholder={app.translator.trans('gm-fire-nexusphp-api.forum.seedbonus.title_placeholder')} disabled={this.loading}/>\n          </div>\n          <div className=\"Form-group\">\n            <Button className=\"Button Button--primary Button--block\" type=\"submit\" loading={this.loading} disabled={this.loading}>\n              {app.translator.trans('gm-fire-nexusphp-api.forum.seedbonus.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n    if (typeof parseInt(this.seedbonus()) === 'number') {\n      this.loading = true;\n      app.request({\n        method: \"POST\",\n        url: app.forum.attribute(\"apiUrl\") + \"/seedbonus\",\n        body: {\n          data: {\n            nickname: this.nickname,\n            username: this.username,\n            seedbonus: this.seedbonus,\n            postId: this.postId\n          }\n        }\n      })\n      .then((data) => {\n        if (data.data.attributes.ret === 0) {\n          this.success = true;\n        } else {\n          app.alerts.show({type: 'error'},\n            extractText(data.data.attributes.msg)\n          );\n        }\n        this.loading = false;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.loading = false;\n        m.redraw();\n        throw error;\n      });\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/punctuateSeries'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport Tooltip from 'flarum/common/components/Tooltip';\n\nexport default class MedalsBar extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    const user = this.attrs.user;\n    this.medals = [];\n\n    if (user.data.attributes) {\n      app.request({\n        method: \"GET\",\n        url: app.forum.attribute(\"apiUrl\") + \"/medals\",\n        params: {\n          username: user.data.attributes.username\n        }\n      })\n      .then((data) => {\n        this.medals = JSON.parse(data.data.id);\n        m.redraw();\n      })\n    }\n  }\n\n  view() {\n    const medals = this.medals || [];\n    const userUrl = app.data.nexusphpApiPluginSettings.apiurl + '/userdetails.php?id=' + this.attrs.user.data.attributes.username;\n    return (\n      <>\n      <div class=\"PostUser-medals\">\n          <span class=\"PostUser-text\">\n            {medals.length ? (\n              medals.map((medal) => {\n                let imgsrc = '<img src=' + medal.image_large + ' data-reaction height=\"185px\" width=\"185px;\"/>';\n                return (\n                  <Tooltip text={imgsrc} html>\n                    <img src={medal.image_small} title={medal.name} data-reaction class=\"image\"/>\n                  </Tooltip>\n                );\n              })\n            ) : \"\"}\n          </span>\n      </div>\n      <div class=\"PostUser-details\"><a href={userUrl} target=\"_blank\">详细资料</a></div>\n      </>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nimport { truncate } from 'flarum/common/utils/string';\n\nexport default class PostBonusNotification extends Notification {\n  icon() {\n    return 'fas fa-yen-sign';\n  }\n\n  href() {\n    return app.route.post(this.attrs.notification.subject());\n  }\n\n  content() {\n    const notification = this.attrs.notification;\n    const user = notification.fromUser();\n\n    return app.translator.trans('gm-fire-nexusphp-api.forum.notifications.post_bonus_text', { user, count: 1 });\n  }\n\n  excerpt() {\n    return truncate(this.attrs.notification.subject().contentPlain(), 200);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\nimport { truncate } from 'flarum/common/utils/string';\n\nexport default class PostReplyNotification extends Notification {\n  icon() {\n    return 'fas fa-pencil-alt';\n  }\n\n  href() {\n    return app.route.post(this.attrs.notification.subject());\n  }\n\n  content() {\n    const notification = this.attrs.notification;\n    const user = notification.fromUser();\n\n    return app.translator.trans('gm-fire-nexusphp-api.forum.notifications.post_reply_text', { user, count: 1 });\n  }\n\n  excerpt() {\n    return truncate(this.attrs.notification.subject().contentPlain(), 200);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostsUserPage'];","import app from 'flarum/forum/app';\nimport PostsUserPage from 'flarum/forum/components/PostsUserPage';\n\n/**\n * The `BonusUserPage` component shows posts which user the user liked.\n */\nexport default class BonusUserPage extends PostsUserPage {\n  /**\n   * Load a new page of the user's activity feed.\n   *\n   * @param offset The position to start getting results from.\n   * @protected\n   */\n  loadResults(offset: number) {\n    return app.store.find('posts', {\n      filter: {\n        type: 'comment',\n        bonusBy: this.user.id(),\n      },\n      page: { offset, limit: this.loadLimit },\n      sort: '-createdAt',\n    });\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport User from 'flarum/common/models/User';\nimport BonusUserPage from './components/BonusUserPage';\n\nexport default [\n  new Extend.Routes() //\n    .add('user.bonus', '/u/:username/bonus', BonusUserPage),\n\n  new Extend.Model(Post) //\n    .hasMany<User>('bonus')\n    .attribute<number>('bonusCount'),\n];\n","import BonusUserPage from './components/BonusUserPage';\nimport PostBonusNotification from './components/PostBonusNotification';\n\nexport default {\n  'nexusphp-api/components/BonusUserPage': BonusUserPage,\n  'nexusphp-api/components/PostBonusNotification': PostBonusNotification,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core;","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport PostUser from 'flarum/forum/components/PostUser';\nimport addSeedBonusAction from './addSeedBonusAction';\nimport addBonussList from './addBonusList';\nimport addBonusTabToUserProfile from './addBonusTabToUserProfile';\nimport MedalsBar from './components/MedalsBar';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport PostBonusNotification from './components/PostBonusNotification';\nimport PostReplyNotification from './components/PostReplyNotification';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('gm-fire-nexusphp-api', () => {\n\n  app.notificationComponents.postBonus = PostBonusNotification;\n  app.notificationComponents.postReply = PostReplyNotification;\n\n  addSeedBonusAction();\n  addBonussList();\n  addBonusTabToUserProfile();\n\n  extend(PostUser.prototype, 'view', function (view) {\n    const user = this.attrs.post.user();\n\n    if (!user) return;\n\n    view.children.push(MedalsBar.component({ user }));\n  });\n\n  extend(NotificationGrid.prototype, 'notificationMethods', function (items) {\n    items.add('push', {\n      name: 'push',\n      icon: 'fas fa-people-arrows',\n      label: app.translator.trans('gm-fire-nexusphp-api.forum.settings.push_header'),\n    });\n  });\n\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('postReply', {\n      name: 'postReply',\n      icon: 'fas fa-pencil-alt',\n      label: app.translator.trans('gm-fire-nexusphp-api.forum.settings.notify_post_reply_label'),\n    });\n  });\n\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('postBonus', {\n      name: 'postBonus',\n      icon: 'fas fa-yen-sign',\n      label: app.translator.trans('gm-fire-nexusphp-api.forum.settings.notify_post_bonus_label'),\n    });\n  });\n\n});\n\n// Expose compat API\nimport bonusCompat from './compat';\nimport { compat } from '@flarum/core/forum';\n\nObject.assign(compat, bonusCompat);\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport SeedBonusModal from './components/SeedBonusModal';\n\nexport default function () {\n  extend(CommentPost.prototype, 'actionItems', function (items) {\n    const post = this.attrs.post;\n\n    const user = post.user();\n\n    let isSennd = app.session.user && (user !== app.session.user);\n\n    if (post.isHidden() || !app.forum.attribute('gm-fire-nexusphp-api.seedbonusOpen') || !isSennd) return;\n\n    items.add(\n      'seedbonus',\n      <Button className=\"Button Button--link\" onclick={() => app.modal.show(SeedBonusModal, { user, post })}>\n        {app.forum.attribute('gm-fire-nexusphp-api.seedbonusLabel')}\n      </Button>\n    );\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport Link from 'flarum/common/components/Link';\nimport punctuateSeries from 'flarum/common/helpers/punctuateSeries';\nimport username from 'flarum/common/helpers/username';\nimport icon from 'flarum/common/helpers/icon';\nimport Button from 'flarum/common/components/Button';\n\nexport default function () {\n  extend(CommentPost.prototype, 'footerItems', function (items) {\n    const post = this.attrs.post;\n    const bonus = post.bonus();\n\n    if (bonus && bonus.length) {\n      const limit = 4;\n      const overLimit = post.bonusCount() > limit;\n\n      const names = bonus\n        .sort((a) => (a === app.session.user ? -1 : 1))\n        .slice(0, overLimit ? limit - 1 : limit)\n        .map((user) => {\n          return (\n            <Link href={app.route.user(user)}>\n              {user === app.session.user ? app.translator.trans('gm-fire-nexusphp-api.forum.post.you_text') : username(user)}\n            </Link>\n          );\n        });\n\n      // If there are more users that we've run out of room to display, add a \"x\n      // others\" name to the end of the list. Clicking on it will display a modal\n      // with a full list of names.\n      if (overLimit) {\n        const count = post.bonusCount() - names.length;\n        const label = app.translator.trans('gm-fire-nexusphp-api.forum.post.others_link', { count });\n        names.push(<span>{label}</span>);\n      }\n\n      items.add(\n        'bonus',\n        <div className=\"Post-bonusBy\">\n          {icon('fas fa-yen-sign')}\n          {app.translator.trans(`gm-fire-nexusphp-api.forum.post.bonus_by_text`, {\n            count: names.length,\n            users: punctuateSeries(names),\n          })}\n        </div>\n      );\n    }\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\nexport default function addBonusTabToUserProfile() {\n  extend(UserPage.prototype, 'navItems', function (items: ItemList<Mithril.Children>) {\n    const user = this.user;\n    items.add(\n      'bonus',\n      <LinkButton href={app.route('user.bonus', { username: user?.slug() })} icon=\"fas fa-yen-sign\">\n        {app.translator.trans('gm-fire-nexusphp-api.forum.user.bonus_link')}\n      </LinkButton>,\n      88\n    );\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","SeedBonusModal","_Modal","apply","arguments","_proto","oninit","vnode","this","seedbonus","Stream","success","user","attrs","post","nickname","data","attributes","displayName","username","postId","id","className","title","app","trans","content","m","Button","onclick","hide","type","min","autocomplete","name","max","onblur","toString","replace","bidi","placeholder","disabled","loading","onsubmit","e","_this","preventDefault","parseInt","method","url","attribute","body","then","ret","show","extractText","msg","redraw","error","Modal","MedalsBar","_Component","medals","params","JSON","parse","view","userUrl","nexusphpApiPluginSettings","apiurl","'['","class","length","map","medal","imgsrc","image_large","Tooltip","text","html","src","image_small","href","target","Component","PostBonusNotification","_Notification","icon","notification","subject","fromUser","count","excerpt","truncate","contentPlain","Notification","PostReplyNotification","BonusUserPage","_PostsUserPage","loadResults","offset","find","filter","bonusBy","page","limit","loadLimit","sort","PostsUserPage","Extend","add","Post","hasMany","postBonus","postReply","extend","CommentPost","items","isSennd","isHidden","bonus","overLimit","bonusCount","names","slice","Link","label","push","users","punctuateSeries","UserPage","LinkButton","slug","PostUser","children","component","NotificationGrid","assign","bonusCompat"],"sourceRoot":""}